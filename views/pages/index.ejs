<!DOCTYPE html>
<html lang="en">
  <head>
    <title><%= Math.round(currently.temperature) %>º<%= params.scale %></title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="language" content="english">
    <meta name="description" content="Forecast hourly">
    <meta property="og:email" content="julian@juliannorton.com">
    <meta name="robots" content="Index, follow">
    <meta http-equiv="refresh" content="600">
    <link rel="stylesheet" type="text/css" href="/style/main.css" />
    <link rel="icon" href="<%= '/images/' + currently.icon + '.svg' %>" sizes="any" type="image/svg+xml">
  </head>

  <body class="test-container">
    <div class="container">
      <nav class="m-a-1" role="navigation">
        <p>We tried to guess your location</p>
        <ul class="navigation">
          <li><%= params.formatted_location %></li>
          <li>
            <small><a href="#change-location">Change location</a></small>
          </li>
        </ul>
      </nav>
      
      <%#
      <section class="m-a-1 card">
        <h4><a href="#">Winter storm warning in effect until 10pm.</a></h4>
        <p class="status-subtitle">A potent winter storm system will move into east central colorado by later this morning. Heavy snow has developed along the front range…</p>
        <!-- specifically for lynx -->
        <hr style="display: none;"/>
      </section>
      %>
      <article class="m-a-1 card">
        <header>
          <p class="data-secondary">Updated: <%= moment.unix(currently.time).format('h:mmA') %></p>
          <div class="flex">
            <div class="status-primary status-icon">
              <%- include('../../public/images/' + currently.icon + '.svg') %>
            </div>
            <span class="status-primary"><%= Math.round(currently.temperature) %>º<%= params.scale %></span>
          </div>
          <%- include('../partials/summary', {data: currently}) %>
        </header>
      </article>
      <section class="m-a-1 card">
        <article>
          <header class="forecast-primary">
            <p class="data-secondary">
              Today
            </p>
            <div class="flex">
              <div class="status-primary status-icon">
                <%- include('../../public/images/' + daily.data[0].icon + '.svg') %>
              </div>
              <span>
                <p><%= daily.data[0].summary %></p>
                <p>
                  <span class="data-secondary"><%= moment.unix(daily.data[0].temperatureMaxTime).format('h:mmA')%></span>
                  High <%= Math.round(daily.data[0].temperatureMax) %>°
                </p>
                <p>
                  <span class="data-secondary"><%= moment.unix(daily.data[0].temperatureMinTime).format('h:mmA')%></span>
                  Low <%= Math.round(daily.data[0].temperatureMin) %>°
                </p>
              </span>
            </div>
          </header>
          <ul class="forecast-secondary">
            <% for (var i = 1; i < 12; i++) { %>
            <li>
              <span class="data-secondary"><%= moment.unix(hourly.data[i].time).format('h:mmA') %></span>
              <span class=""><%= Math.round(hourly.data[i].temperature) %>º</span>
              <span class=""><%= hourly.data[i].summary %></span>
              <%- include('../partials/summary', {data: hourly.data[i]}) %>
            </li>
            <% } %>
          </ul>
        </article>
      </section>
      <article class="m-a-1 card">
        <p class="data-secondary">This week</p>
        <p class="status-subtitle">
          <%= daily.summary %>
        </p>
      </article>
      <section class="navigation">
        <ul class="flex justify wrap">
          <li class="m-x-1">
            <form action="/" method="get">
              <label for="change-location">Enter a place, city, or zipcode.</label>
              <input type="text" id="change-location" name="location" placeholder="New York, NY" />
              <button type="submit">Change location</button>
            </form>
          </li>
          <li class="m-x-1">
            Units:
            <small>
              <% if (params.scale === 'F') { %>
                Fahrenheit (°F)
                <a class="m-x-1" href="/<%= params.location %>/c">Switch to Celsius (°C)</a>
              <% } else {%>
                Celsius (°C)
                <a class="m-x-1" href="/<%= params.location %>">Switch to Fahrenheit (°F)</a>
              <% } %>
            </small>
          </li>
        </ul>
      </section>
      <hr/>
      <footer class="navigation">
        <ul class="flex">
          <li class="m-x-1"><small><a href="https://github.com/JulianNorton/weather-10kb" rel="noopener" target="_blank">Github</a></small></li>
          <li class="m-x-1"><small><a href="https://github.com/amitjakhu/dripicons-weather" rel="noopener nofollow" target="_blank">Icon credit</a></small></li>
          <li class="m-x-1"><small><a href="https://developer.forecast.io/" rel="noopener nofollow" target="_blank">Weather API credit</a></small></li>
        </ul>
      </footer>
    </div>
    <script>
      console.log(<%- JSON.stringify(currently) %>);
      console.log(<%- JSON.stringify(hourly) %>);
      console.log(<%- JSON.stringify(params) %>);
    </script>
  </body>
</html>
