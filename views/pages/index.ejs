<!DOCTYPE html>
<html lang="en">
  <head>
    <title><%= Math.round(currently.temperature) %>º <%= params.scale %></title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="language" content="english">
    <meta name="description" content="Forecast hourly">
    <meta property="og:email" content="julian@juliannorton.com">
    <meta name="robots" content="Index, follow">
    <meta http-equiv="refresh" content="600">
    <link rel="stylesheet" type="text/css" href="/style/main.css" />
  </head>

  <body class="test-container">
    <div class="container">
      <samp class="samp">
        <%= JSON.stringify(params) %>
      </samp>
      <nav class="m-a-1" role="navigation">
        <p>We tried to guess your location</p>
        <ul class="navigation">
          <li>New York, NY, (10025)</li>
          <li>
            <small><a href="#change-location">Change location</a></small>
          </li>
        </ul>
      </nav>
      
      <%#
      <section class="m-a-1 card">
        <h4><a href="#">Winter storm warning in effect until 10pm.</a></h4>
        <p class="status-subtitle">A potent winter storm system will move into east central colorado by later this morning. Heavy snow has developed along the front range…</p>
        <!-- specifically for lynx -->
        <hr style="display: none;"/>
      </section>
      %>
      
      <section class="m-a-1 card">
        <article>
          <header class="forecast-primary">
            <p class="data-secondary">Updated: <%= moment.unix(currently.time).format('h:mmA') %></p>
            <div class="flex">
              <img
                 class="status-primary status-icon"
                 src="/images/<%= currently.icon %>.svg"
                 alt="<%= currently.icon %>"
                 title="<%= currently.summary %>"
               >
               <span class="status-primary"><%= Math.round(currently.temperature) %>º<%= params.scale %></span>
               <% include ../partials/summary.ejs %>
          </header>
          <ol class="forecast-secondary">
            <!-- i = 0 will print current hour too. i.e. 10:40am… 10am 11am… -->
            <% for (var i = 1; i < 49; i++) { %>
            <li>
              <span class="data-inline data-secondary time"><%= moment.unix(hourly.data[i].time).format('h:mmA') %></span>
              <span class="data-inline"><%= Math.round(hourly.data[i].temperature) %>º</span>
              <span class="data-inline"><%= hourly.data[i].summary %></span>
            </li>
            <% } %>
          </ol>
        </article>
      </section>
      <section class="m-a-1 card">
        <article>
          <header class="forecast-secondary">
            <p class="data-secondary">Today</p>
            <p class="status-subtitle">
              <img
               class="status-primary status-icon"
               src="/images/<%= daily.data[0].icon %>.svg"
               alt="<%= daily.data[0].icon %>"
               title="<%= daily.data[0].summary %>"
               >
              <%= daily.data[0].summary %>
              Low <%= Math.round(daily.data[0].temperatureMin) %>°
              High <%= Math.round(daily.data[0].temperatureMax) %>°
            </p>
        </article>
      </section>
      <section class="m-a-1 card">
        <article>
          <header class="forecast-secondary">
            <p class="data-secondary">This week</p>
            <p class="status-subtitle">
              <%= daily.data[0].summary %>
              Low <%= Math.round(daily.data[0].temperatureMin) %>°
              High <%= Math.round(daily.data[0].temperatureMax) %>°
            </p>
        </article>
      </section>
      <section class="navigation m-a-1">
        <ul>
          <li style="margin: 0 1em 1em 0">
            <form action="/" method="get">
              <label for="change-location">Enter a place, city, or zipcode.</label>
              <input type="text" id="change-location" name="location" placeholder="New York, NY" />
              <button type="submit">Change location</button>
            </form>
          </li>
          <li>
            <small>
              <% if (params.scale === 'F') { %>
                Fahrenheit (°<small class="temp-scale">F</small>)
                <a href="/<%= params.location %>/c"><small>Switch to Celsius (°<small class="temp-scale">C</small>)</small></a>
              <% } else {%>
                Celsius (°<small class="temp-scale">C</small>)
                <a href="/<%= params.location %>"><small>Switch to Fahrenheit (°<small class="temp-scale">F</small>)</small></a>
              <% } %>
            </small>
          </li>
        </ul>
      </section>
      <footer class="navigation m-a-1">
        <ul>
          <li><a href="https://github.com/JulianNorton/weather-10kb" rel="noopener" target="_blank">Weather 10kb github</a></li>
          <li><small><a href="https://github.com/amitjakhu/dripicons-weather" rel="noopener nofollow" target="_blank">Icons credit</a></small></li>
          <li><small><a href="https://developer.forecast.io/" rel="noopener nofollow" target="_blank">Weather API credit</a></small></li>
        </ul>
      </footer>
    </div>
  </body>
</html>
