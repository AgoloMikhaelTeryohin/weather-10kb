<!DOCTYPE html>
<html lang="en">
  <head>
    <title><%= Math.round(currently.temperature) %>º <%= params.scale %></title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="language" content="english">
    <meta name="description" content="Forecast hourly">
    <meta property="og:email" content="julian@juliannorton.com">
    <meta name="robots" content="Index, follow">
    <meta http-equiv="refresh" content="600">
    <!--<link rel="stylesheet" type="text/css" href="/style/main.css" />-->
    <style>html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*{box-sizing:border-box}a{transition:opacity 125ms ease-in-out}a:hover{opacity:.8}html,body,div,span,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,strike,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,details,figure,figcaption,footer,header,hgroup,menu,nav,output,section,summary,time,mark{margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}ol,ul{list-style:none}body{line-height:1.2;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;margin:0;font-size:16px;font-size:calc(1em + .5vw);background:#FDFFFC}h1,h2,h3,h4,h5,h6,.active{font-weight:700}h1,h2,h3,h4,h5,h6,p{margin-bottom:.3em}.samp{font-family:monospace;font-size:1rem;overflow-wrap:break-word;color:white;padding:.3em;background:#36383C;display:block;border-bottom:1px solid black;box-shadow:0 1px 1px rgba(77,77,77,0.3);margin:0 .5rem}.samp:before{content:'// debugging';display:block}.navigation{padding:0}.navigation li{display:inline-block;padding:.2em;vertical-align:middle;margin:0}.container{max-width:70rem;margin:0 auto}.navigation{padding:0}.card{background-color:white;border:1px solid rgba(220,220,220,0.5);padding:.66em;border-radius:2px;box-shadow:0 1px 1px rgba(77,77,77,0.3)}.navigation li{display:inline-block;padding:.2em;vertical-align:middle;margin:0}.forecast-primary{border-bottom:1px solid rgba(220,220,220,0.5);margin-bottom:.66em;padding-bottom:.66em}.forecast-secondary li{border-bottom:1px solid rgba(220,220,220,0.5);margin-bottom:.66em;padding-bottom:.66em}.forecast-secondary li:last-child{border:0;padding:0;margin:0}.status-primary{font-size:3em;font-weight:200;display:inline-block}.status-icon{height:64px;width:auto;vertical-align:-10%}.status-subtitle{font-size:.9em;width:100%;margin-top:.4em}.data-secondary{font-size:.8em;color:#555;margin-right:.2rem}.time{min-width:4em}.navigation{padding:0}.navigation li{display:inline-block;padding:.2em;vertical-align:middle;margin:0}.p-a-1{padding:1em}.m-a-0{margin:0}.nav-item{padding:.125em;margin:.125em}.m-a-1{margin:1em .5rem}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}</style>
  </head>

  <body class="test-container">
    <div class="container">
      <samp class="samp">
        <%= JSON.stringify(params) %>
      </samp>
      <nav class="m-a-1" role="navigation">
        <p>We tried to guess your location</p>
        <ul class="navigation">
        <li>New York, NY, (10025)</li>
          <li>
            <small><a href="#change-location">Change location</a></small>
          </li>
        </ul>
      </nav>
      
      <%#
      <section class="m-a-1 card">
        <h4><a href="#">Winter storm warning in effect until 10pm.</a></h4>
        <p class="status-subtitle">A potent winter storm system will move into east central colorado by later this morning. Heavy snow has developed along the front range…</p>
        <!-- specifically for lynx -->
        <hr style="display: none;"/>
      </section>
      %>
      
      <section class="m-a-1 card">
        <article>
          <header class="forecast-primary">
            <p class="data-secondary">Updated: <%= moment.unix(currently.time).format('h:mmA') %></p>
            <img
               class="status-primary status-icon"
               src="/images/<%= currently.icon %>.svg"
               alt="<%= currently.icon %>"
               title="<%= currently.summary %>"
               >
               <span class="status-primary"><%= Math.round(currently.temperature) %>º<%= params.scale %></span>
               <!-- TEMPLATIZE ME -->
               <p class="status-subtitle">
                  <span><%= currently.summary %>,</span>
                  <!-- If feels like is within 3°, omit? -->
                  <span>
                    feels like 
                    <%= Math.round(currently.apparentTemperature) %>°
                  </span>
                  <!-- https://en.wikipedia.org/wiki/Beaufort_scale#Modern_scale ??-->
                  <!-- if 1mph or 0mph wind AND windSpeedError is low, say no wind -->
                  <!-- <span>with no wind.</span> -->
                  <!-- <span>with a <%= Math.round(currently.windSpeed) %>mph breeze.</span> -->
                  <span>with <%= Math.round(currently.windSpeed) %>mph winds.</span>
                  <!-- <span>with <%= Math.round(currently.windSpeed) %>mph heavy winds</span> -->
                  <!-- <span>with <%= Math.round(currently.windSpeed) %>mph severe winds</span> -->

                  <!-- If % chance less than 5%(?), omit from summary? -->
                  <span><%= Math.round(100 * currently.precipProbability) %>% chance of</span>
                  <!-- currently.precipIntensity -->
                  <!-- in inches of liquid water per hour) of precipitation occurring at the given time conditional on probability -->
                  <!-- Assuming any precipitation occurs at all) -->
                  <!--
                  0 in./hr. ~== to no precipitation
                  0.002 in./hr. ~== to very light precipitation
                  0.017 in./hr. ~== to light precipitation
                  0.1 in./hr. ~== to moderate precipitation
                  0.4 in./hr. ~== to heavy precipitation.
                  -->
                  <span><%= currently.precipIntensity %> [very light/light/moderate/heavy] [<%= currently.precipType %>].</span>
               </p><!-- end template -->

          </header>
          <ol class="forecast-secondary">
          <!-- i = 0 will print current hour too. i.e. 10:40am… 10am 11am… -->
            <% for (var i = 1; i < 12; i++) { %>
              <li>
                <span class="data-inline data-secondary time"><%= moment.unix(hourly.data[i].time).calendar() %></span>
                <span class="data-inline"><%= Math.round(hourly.data[i].temperature) %>º</span>
                <span class="data-inline"><%= hourly.data[i].summary %></span>
                <%# fix the syntax error (< %=) when uncommenting <p class="status-subtitle">< %= hour.summary %></p> %>

                <!-- TEMPLATIZE ME, duped from above -->
                <p class="status-subtitle" style="font-size: .8em">
                   <span>
                     feels like 
                     <%= Math.round(hourly.data[i].apparentTemperature) %>°
                   </span>
                   <span>with <%= Math.round(hourly.data[i].windSpeed) %>mph winds.</span>
                   <span><%= Math.round(100 * hourly.data[i].precipProbability) %>% chance of</span>
                   <span><%= hourly.data[i].precipIntensity %> [very light/light/moderate/heavy] [<%= hourly.data[i].precipType %>].</span>
                 </p><!-- end template -->

              </li>
            <% } %>
          </ol>
        </article>
      </section>
      <section class="m-a-1 card">
        <article>
          <header class="forecast-secondary">
            <p class="data-secondary">This week</p>
            <p class="status-subtitle">
              <%= daily.summary %>
            </p>
        </article>
      </section>
      <section class="navigation m-a-1">
        <ul>
          <li style="margin-right: 1em">
            <form action="/" method="get">
              <label for="change-location">Enter a place, city, or zipcode.</label>
              <input type="text" id="change-location" name="location" placeholder="New York, NY" />
              <button type="submit">Change location</button>
            </form>
          </li>
          <li>
            <small>
              <% if (params.scale === 'F') { %>
                Fahrenheit (°<small class="temp-scale">F</small>)
                <a href="/<%= params.location %>/c"><small>Switch to Celsius (°<small class="temp-scale">C</small>)</small></a>
              <% } else {%>
                Celsius (°<small class="temp-scale">C</small>)
                <a href="/<%= params.location %>"><small>Switch to Fahrenheit (°<small class="temp-scale">F</small>)</small></a>
              <% } %>
            </small>
          </li>
        </ul>
      </section>
      <footer class="navigation m-a-1">
        <ul>
          <li><a href="https://github.com/JulianNorton/weather-10kb" rel="noopener" target="_blank">Weather 10kb github</a></li>
          <li><small><a href="https://github.com/amitjakhu/dripicons-weather" rel="noopener nofollow" target="_blank">Icons credit</a></small></li>
          <li><small><a href="https://developer.forecast.io/" rel="noopener nofollow" target="_blank">Weather API credit</a></small></li>
        </ul>
      </footer>
    </div>
  </body>
</html>
